var t,e;t=this,e=function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},e=function(){return(e=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},n=function(){function t(){this.initialDomString=""}return t.prototype.init=function(t,e,n,i){var a=this,o=e.id,s=e.loading,r=Math.floor(e.count/2)*e.chunkHeight;n||(this.initialDomString+='\n        <div class="q-select-header q-select-header--'+o+'">\n          <div class="q-select-header-cancel q-select-header-cancel--'+o+'">\n            <div class="q-select-header-cancel__value q-select-header-cancel__value--'+o+'">'+(e.cancelBtn||"\u53d6\u6d88")+'</div>\n          </div>\n          <div class="q-select-header-title q-select-header-title--'+o+'">\n            <div class="q-select-header-title__value q-select-header-title__value--'+o+'">'+(e.title||"\u8bf7\u9009\u62e9")+'</div>\n          </div>\n          <div class="q-select-header-confirm q-select-header-confirm--'+o+'">\n            <div class="q-select-header-confirm__value q-select-header-confirm__value--'+o+'">'+(e.confirmBtn||"\u786e\u5b9a")+"</div>\n          </div>\n        </div>\n      "),this.initialDomString+='\n      <div style="height:'+e.count*e.chunkHeight+"px;display:"+(s?"flex":"none")+'" class="q-select-loading q-select-loading--'+o+'">\n        <svg class="q-select-loading-svg" viewBox="25 25 50 50">\n          <circle\n            class="q-select-loading-svg__circle"\n            cx="50"\n            cy="50"\n            r="20"\n            fill="none"\n          />\n        </svg>\n      </div>\n      <div style="height:'+e.count*e.chunkHeight+'px" class="q-select-box q-select-box--'+o+'">\n    ',t.forEach(function(t){a.initialDomString+='\n      <div class="q-select-box-item q-select-box-item--'+o+'">\n        <div class="q-select-box-item__overlay q-select-box-item__overlay--'+o+'" style="background-size: 100% '+(s?"100%":r+"px")+';"></div>\n        <div class="q-select-box-item__highlight q-select-box-item__highlight--'+o+'" style="top: '+r+"px;height: "+e.chunkHeight+'px"></div>\n        <div class="q-select-box-item-collections q-select-box-item-collections--'+o+'">\n        '+t.map(function(t){return'<div style="line-height: '+e.chunkHeight+'px;" class="q-select-box-item-collections__tick q-select-box-item-collections__tick--'+o+'">\n              '+t.value+"\n            </div>"}).join("")+"\n        </div>\n      </div>\n      "}),i(this.initialDomString)},t.prototype.remove=function(){this.initialDomString=""},t.diff=function(e,n,i,a,o,s,r,l){var h=t.findAll("q-select-box-item-collections--"+a),d=t.find("q-select-box--"+a);if(e.length<n.length)if(h.length<n.length){for(var c=[],f=[],u=[],p=r?i:i+1;p<e.length;p++){var m=h[p];t.diffForDatas(m,a,o,s[p].data,n[p])}for(var y=h.length;y<n.length;y++){var g=document.createDocumentFragment(),x=t.create("div");t.addClass(x,["q-select-box-item","q-select-box-item--"+a]);var v=t.create("div");t.addClass(v,["q-select-box-item__overlay","q-select-box-item__overlay--"+a]);var b=t.create("div");t.addClass(b,["q-select-box-item__highlight","q-select-box-item__highlight--"+a]),t.addStyle(b,{height:o+"px"}),x.appendChild(v),x.appendChild(b);var k=t.create("div");t.addClass(k,["q-select-box-item-collections","q-select-box-item-collections--"+a]);for(p=0;p<n[y].length;p++){var I=t.create("div");t.addClass(I,["q-select-box-item-collections__tick","q-select-box-item-collections__tick--"+a]),t.addStyle(I,{lineHeight:o+"px"}),I.textContent=n[y][p].value,g.appendChild(I)}k.appendChild(g),x.appendChild(k),d.appendChild(x),c[y]=v,f[y]=k,u[y]=b}l&&l(c,f,u)}else{for(p=r?i:i+1;p<n.length;p++){m=t.findIndex("q-select-box-item-collections--"+a,p);t.diffForDatas(m,a,o,s[p].data,n[p])}l&&l()}else if(e.length===n.length){for(p=r?i:i+1;p<n.length;p++)t.diffForDatas(h[p],a,o,e[p],n[p]);l&&l()}else if(e.length>n.length){for(p=r?i:i+1;p<n.length;p++)t.diffForDatas(h[p],a,o,e[p],n[p]);l&&l()}},t.diffForDatas=function(e,n,i,a,o){var s=o.length-a.length,r=a.length,l=o.length;if(s>0){for(var h=document.createDocumentFragment(),d=0;d<r;d++){var c=o[d].value;e.children[d].textContent=c}for(d=r;d<l;d++){var f=document.createElement("div");c=o[d].value;t.addClass(f,["q-select-box-item-collections__tick","q-select-box-item-collections__tick--"+n]),t.addStyle(f,{lineHeight:i+"px"}),f.textContent=c,h.appendChild(f)}e.appendChild(h)}else{for(d=0;d<l;d++){c=o[d].value;e.children[d].textContent=c}var u=Array.from(e.children).slice();for(d=l;d<r;d++)e.removeChild(u[d])}},t.create=function(t){return document.createElement(t)},t.find=function(t){return document.querySelector("."+t)},t.findIndex=function(t,e){return Array.from(document.querySelectorAll("."+t))[e]},t.findLast=function(t){var e=Array.from(document.querySelectorAll("."+t));return e[e.length-1]},t.addClass=function(t,e){t.className=Array.isArray(e)?e.join(" "):e},t.addStyle=function(t,e){var n=this;if(Array.isArray(e))e.map(function(e){return n.addStyle(t,e)});else for(var i in e)t.style[i]=e[i]},t.remove=function(t,e){t.removeChild(e)},t.findAll=function(t){return document.querySelectorAll("."+t)},t.bind=function(t,e,n,i){t.addEventListener(e,n,i)},t.unbind=function(t,e){t.removeEventListener(e,function(){})},t}();function i(t){return"Object"===Object.prototype.toString.call(t).slice(8,-1)}function a(t){return isFinite(t)}function o(t){if(Array.isArray(t))return t.map(function(t){return o(t)});var e={};for(var n in t){var a=t[n];e[n]=i(a)?o(a):a}return e}var s=function(){function t(t){void 0===t&&(t=200),this.start=0,this.end=0,this.diff=0,this.dir="bottom",this.count=0,this.ratio=0,this.result=0,this.animateId=0,this.duration=t,this.pipline=!0}return t.prototype.getAnimateCount=function(t){return t/16},t.prototype.getDirection=function(){return this.start>this.end?"top":"bottom"},t.prototype.run=function(t,e,n,i,a){t!==e&&0!==a?(this.pipline=!0,this.ratio=0,this.start=t,this.end=e,this.result=t,this.diff=Math.abs(this.start-this.end),this.count=Math.ceil(this.getAnimateCount(a||this.duration)),this.dir=this.getDirection(),this.doAnimate(n,i)):i&&i(e)},t.prototype.stop=function(){this.pipline=!1,this.ratio=0,window.cancelAnimationFrame(this.animateId)},t.prototype.doAnimate=function(t,e){var n;this.pipline&&(this.ratio+=1/this.count,this.ratio<=1?(this.result=this.start+this.diff*(n=this.ratio,Math.pow(n-1,3)+1)*("bottom"===this.dir?1:-1),this.animateId=window.requestAnimationFrame(this.doAnimate.bind(this,t,e))):(this.result=this.end,window.cancelAnimationFrame(this.animateId),e&&e(this.end),this.ratio=0),t&&t(this.result))},t}(),r=function(){function t(t,e,n,i,a,o,r,l,h){this.overlay=n,this.collection=i,this.hightlightEl=a,this.pre=r,this.endCall=l,this.curIndex=o,this.preIndex=o,this.preTrans=0,this.animateSlide=new s(2e3),this.animateShrink=new s(250),this.data=t,this.average=Math.floor(r.count/2),this.maxScrollTop=0,this.minScrollTop=0,this.featureScrollTop=0,this.isAnimating=!1,this.aim=e,this.hidden=!1,this.lastTime=0,this.positions=[],this.touchStart=0,this.touchDiff=0,this.fromDiff=h||!1,this.init()}return t.prototype.init=function(){n.bind(this.overlay,"touchstart",this.doTouchStart.bind(this)),n.bind(this.overlay,"touchmove",this.doTouchMove.bind(this)),n.bind(this.overlay,"touchend",this.doTouchEnd.bind(this)),this.initTrans()},t.prototype.active=function(t){n.findIndex("q-select-box-item--"+this.pre.id,t).style.display="flex",this.hidden=!1},t.prototype.deactive=function(t){n.findIndex("q-select-box-item--"+this.pre.id,t).style.display="none",this.hidden=!0},t.prototype.reset=function(t,e){this.data=t,this.preIndex=this.curIndex,this.setMinScrollTop(this.data),e?(this.preIndex=0,this.curIndex=0,this.scrollTo(0)):this.scrollTo(this.pre.dynamicIndex[this.aim])},t.prototype.initTrans=function(){var t=(this.average-this.curIndex)*this.pre.chunkHeight;this.preTrans=t,this.initScrollTop(this.average*this.pre.chunkHeight),this.setTrans(t),this.fromDiff&&this.setSize()},t.prototype.setSize=function(){var t=Math.floor(this.pre.$options.count/2)*this.pre.$options.chunkHeight;n.addStyle(this.overlay,{backgroundSize:"100% "+t+"px"}),this.hightlightEl&&n.addStyle(this.hightlightEl,{top:t+"px"})},t.prototype.shrinkSize=function(){n.addStyle(this.overlay,{backgroundSize:"100% 100%"})},t.prototype.initScrollTop=function(t){this.maxScrollTop=t,this.setMinScrollTop(this.data)},t.prototype.setMinScrollTop=function(t){this.minScrollTop=this.maxScrollTop-(t.length-1)*this.pre.chunkHeight},t.prototype.setTrans=function(t){this.collection.style.transform="translate3d(0,"+t+"px,0)"},t.prototype.getTouchCenter=function(t){return t.length>=2?(t[0].pageY+t[1].pageY)/2:t[0].pageY},t.prototype.doTouchStart=function(t){this.data.length&&(this.touchStart=this.getTouchCenter(t.touches),this.animateSlide.stop(),this.animateShrink.stop())},t.prototype.doTouchMove=function(t){if(t.preventDefault(),this.data.length){var e=t.timeStamp;this.touchDiff=this.getTouchCenter(t.touches)-this.touchStart+this.preTrans,this.positions.length>60&&this.positions.splice(0,30),this.positions.push({top:this.touchDiff,time:e}),this.lastTime=e,this.setTrans(this.touchDiff)}},t.prototype.doTouchEnd=function(t){if(this.data.length){var e=t.timeStamp;this.isAnimating=!0,e-this.lastTime<=100?this.doSlideAnimate(e):this.doShrinkAnimate()}},t.prototype.doSlideAnimate=function(t){var e,n=this.positions.length-1,i=this.positions.filter(function(e){return e.time>=t-100})[0],a=this.positions[n].time-i.time,o=this.touchDiff-i.top;e=o/a*(1e3/60);var s=this.touchDiff,r=0,l=!1;for(this.positions.length=0;Math.abs(e)>=.1;){if(r+=16,(s+=e*=.95)>=this.maxScrollTop){l=!0,s=this.maxScrollTop;break}if(s<=this.minScrollTop){l=!0,s=this.minScrollTop;break}}this.preIndex=this.curIndex;var h=this.getFeatureIndex(s),d=l?s:this.getFeatureScrollTop(h);Math.abs(o)<=10||r<=250?this.shrinkAnimateToEnd(d):this.slideAnimateToEnd(d,r)},t.prototype.doShrinkAnimate=function(){this.shrinkAnimateToEnd(this.touchDiff)},t.prototype.scrollTo=function(t){var e=this.getFeatureScrollTop(t);this.shrinkAnimateToEnd(e,!0)},t.prototype.slideAnimateToEnd=function(t,e){var n=this;this.animateSlide.run(this.touchDiff,t,function(t){n.touchDiff=t,n.preTrans=t,n.setTrans(t)},function(t){n.animateFinishedCall(t)},e)},t.prototype.shrinkAnimateToEnd=function(t,e){var n=this,i=this.getFeatureIndex(t);t=this.getFeatureScrollTop(i),this.animateShrink.run(this.touchDiff,t,function(t){n.setTrans(t),n.preTrans=t,n.touchDiff=t},function(t){n.animateFinishedCall(t,e)},e?0:250)},t.prototype.animateFinishedCall=function(t,e){if(this.isAnimating=!1,this.preTrans=t,this.touchDiff=t,this.setTrans(t),this.curIndex=this.getFeatureIndex(t),this.preIndex!==this.curIndex&&!e){var n=this.data[this.curIndex];this.fromDiff||this.endCall({key:n.key,value:n.value,index:this.curIndex},this.aim),this.preIndex=this.curIndex}},t.prototype.getFeatureIndex=function(t){var e=this.average-Math.round(t/this.pre.chunkHeight),n=this.data.length;return e<0?0:e>n-1?n-1:e},t.prototype.getFeatureScrollTop=function(t){return(this.average-t)*this.pre.chunkHeight},t}(),l=0,h=function(){function t(t){if(this.$options=t,this.id=l++,this.target=null,t.target){var e=document.querySelector(t.target);e?this.target=e:t.target}this.$options.id=this.id,this.count=t.count=a(+t.count)?+t.count:7,this.chunkHeight=t.chunkHeight=a(+t.chunkHeight)?+t.chunkHeight:40,this.data=t.data,this.dataTrans=[],this.index=t.index,this.dynamicIndex=[],this.realIndex=[],this.isGanged=this.data.every(function(t){return i(t)}),this.touchs=[],this.dynamicData=[],this.realData=[],this.cachedCall=[],this.isReady=!1,this.hidden=!0,this.loading=!!t.loading,this.dom=new n,this.validateOptions()&&this.init()}return t.prototype.validateOptions=function(){var t=this;return this.count%2!=1&&(this.count<5||this.count>9)&&(this.count,this.count=this.$options.count=5),(this.chunkHeight<30||this.chunkHeight>100)&&(this.chunkHeight,this.chunkHeight=this.$options.chunkHeight=40),["ready","cancel","confirm","show","close"].map(function(e){return function(t){this.$options[t]&&"function"!=typeof this.$options[t]&&(this.$options[t],this.$options[t]=function(){})}.call(t,e)}),!(!this.validateData()||!this.validateIndex())},t.prototype.validateData=function(t){var e=t||this.$options.data;return(!e||!Array.isArray(e)||Array.isArray(e)&&0===e.length)&&(this.data=[[""]]),this.isGanged?function t(e,n){return e.every(function(e){if(i(e)){var a=!0,o=!0;return n?(e.value,a=!0):(e.value,o=!0),!o&&!a||!e.children||!e.children.length||t(e.children,!1)}return!0})}(e,!0):e.every(function(t){return!!Array.isArray(t)&&t.every(function(t){return!i(t)||(t.value,!0)})})},t.prototype.validateIndex=function(t){var e=t||this.$options.index;return!e||(!Array.isArray(e)||e.every(function(t){return!0}))},t.prototype.init=function(){var t=this;this.normalizeData(),this.dom.init(this.dataTrans,this.$options,!!this.target,function(e){if(!n.find("q-select-bk")&&!t.target){var i=n.create("div");n.addClass(i,"q-select-bk"),n.addStyle(i,[{zIndex:a(+t.$options.bkIndex)?+t.$options.bkIndex:500},{display:"none"}]),document.body.appendChild(i)}var o=n.create("div");n.addClass(o,["q-select","q-select--"+t.id]),t.target?n.addStyle(o,[{position:"static"}]):n.addStyle(o,[{zIndex:a(+t.$options.selectIndex)?+t.$options.selectIndex:600},{display:"none"}]),o.innerHTML=e,t.target?(t.target.appendChild(o),t.hidden=!1):document.body.appendChild(o),t.dom.remove(),t.prepareMount()})},t.prototype.normalizeIndex=function(t,e){var n=this;this.index=e||this.index,this.index=this.index||Array.from({length:t.length}).fill(0),this.index.map(function(e,i){if(e<0&&(n.index[i]=0),t[i]){var a=t[i].length;e>a-1&&(n.index[i]=a-1)}return e});var i=this.index.length-t.length;this.index=i>=0?this.index.slice(0,t.length):this.index.concat(Array.from({length:Math.abs(i)}).fill(0)),this.dynamicIndex=this.index.slice(),this.realIndex=this.index.slice()},t.prototype.normalizeData=function(t,e){if(this.isGanged)this.normalizeGangedData(),this.dataTrans=this.genGangedData(this.data);else{if(t)if(Array.isArray(t)&&Array.isArray(e))for(var n=0;n<t.length-1;n++)this.data[e[n]]=t[e[n]];else this.data[e]=t;this.normalizeNotGangedData(),this.dataTrans=o(this.data)}},t.prototype.normalizeGangedData=function(){!function t(e){e.map(function(n,a){return i(n)?n.key=n.key||n.value:e[a]=n={value:n,key:n,children:[]},n.children&&n.children.length?t(n.children):n.children=[],n})}(this.data)},t.prototype.normalizeNotGangedData=function(){this.data.map(function(t){for(var e in t){var n=t[e];i(n)?n.key=n.key||n.value:t[e]={key:n,value:n}}})},t.prototype.prepareMount=function(){var t=this;this.normalizeIndex(this.dataTrans);var e=n.findAll("q-select-box-item__overlay--"+this.id),i=n.findAll("q-select-box-item-collections--"+this.id),a=n.findAll("q-select-box-item__highlight--"+this.id);this.dynamicData=this.dataTrans.reduce(function(e,n,i){return e[i]=n[t.index[i]]||{},e[i].index=i,e},[]),this.realData=o(this.dynamicData),this.target||this.mountActions(),this.mountTouches(e,i,a)},t.prototype.mountActions=function(){var t=this,e=n.find("q-select-header-confirm--"+this.id),i=n.find("q-select-header-cancel--"+this.id);function a(){if(this.dynamicIndex=this.realIndex.slice(),this.isGanged){var t=o(this.dataTrans),e=this.genGangedData(this.data,this.realIndex);this.diff(t,e,0,!0,!1,!0)}this.stopAll()}n.bind(e,"click",function(){var e;t.touchs.filter(function(t){return!t.hidden}).every(function(t){return!t.isAnimating})?(t.realIndex=t.dynamicIndex.slice(),t.realData=o(t.dynamicData)):(t.dynamicData=o(t.realData),a.call(t)),t.closeSelect(),t.$options.confirm&&(e=t.$options).confirm.apply(e,t.getChangeCallData())}),n.bind(i,"click",function(){t.$options.disableDefaultCancel||t.closeSelect(),a.call(t),t.$options.cancel&&t.$options.cancel()})},t.prototype.mountTouches=function(t,e,n){var i,a=this;this.dataTrans.forEach(function(i,o){a.touchs[o]=new r(i,o,t[o],e[o],n[o],a.dynamicIndex[o],a,a.touchCallback.bind(a))}),this.setBoxWidth(),this.isReady=!0,this.$options.ready&&(i=this.$options).ready.apply(i,this.getChangeCallData())},t.prototype.closeSelect=function(){var t;if(!this.hidden){var e=n.find("q-select--"+this.id),i=n.find("q-select-bk");n.addStyle(e,{display:"none"}),n.addStyle(i,{display:"none"}),this.hidden=!0,this.$options.hide&&(t=this.$options).hide.apply(t,this.getChangeCallData())}},t.prototype.destroySelect=function(){var t=this;!function(t){try{Promise.resolve().then(function(){t()})}catch(e){setTimeout(function(){t()})}}(function(){for(var e in t.__proto__=null,t)t[e]=null;n.remove(document.body,n.find("q-select--"+l))})},t.prototype.showSelect=function(){var t;if(this.hidden){var e=n.find("q-select--"+this.id),i=n.find("q-select-bk");n.addStyle(e,{display:"block"}),n.addStyle(i,{display:"block"}),this.hidden=!1,this.$options.show&&(t=this.$options).show.apply(t,this.getChangeCallData())}},t.prototype.stopAll=function(){var t=this;this.touchs.filter(function(t){return!t.hidden}).forEach(function(e,n){e.animateShrink.stop(),e.animateSlide.stop(),e.scrollTo(t.realIndex[n]),e.setMinScrollTop(t.dataTrans[n])})},t.prototype.setIndexAndData=function(t){var n=this;t.forEach(function(i,a){var o=n.dynamicIndex[a];o>i.length-1&&(n.realIndex[a]=n.dynamicIndex[a]=o=i.length-1),o<0&&(n.realIndex[a]=n.dynamicIndex[a]=o=0),n.dynamicData[a]=e({},t[a][o],{index:o}),n.realData[a]=e({},t[a][o],{index:o})})},t.prototype.setBoxWidth=function(){var t=n.findAll("q-select-box-item--"+this.id),e=100/this.touchs.filter(function(t){return!t.hidden}).length+"%";t.forEach(function(t){t.style.width=e})},t.prototype.touchCallback=function(t,e){this.dynamicIndex[e]=t.index,this.target&&(this.realIndex[e]=t.index),this.isGanged?this.gangedCallback(t,e):this.notGangedCallback(t,e)},t.prototype.notGangedCallback=function(t,e){var n;this.dynamicData[e]=t;var i=function(){};if(i.priority=e,this.cachedCall.push(i),this.touchs.every(function(t){return!t.isAnimating})&&!this.hidden){var a=Math.min.apply(Math,this.cachedCall.reduce(function(t,e){return t.push(+e.priority),t},[])),o=this.getChangeCallData();this.$options.change&&(n=this.$options).change.apply(n,[a].concat(o)),this.cachedCall.length=0}},t.prototype.gangedCallback=function(t,e){var n=function(){};n.priority=e,n.value=t;var i=this.touchs.filter(function(t){return!t.hidden});if(this.cachedCall[e]=n,i.every(function(t){return!t.isAnimating})){var a=Math.min.apply(Math,this.cachedCall.reduce(function(t,e){return t.push(+e.priority),t},[]));this.dynamicIndex=this.dynamicIndex.slice(0,a+1);for(var o=a+1;o<i.length;o++)this.dynamicIndex[o]=0;var s=this.genGangedData(this.data,this.dynamicIndex);this.diff(this.dataTrans,s,a,!1,!0)}},t.prototype.getChangeCallData=function(){return[this.dynamicData.reduce(function(t,e){return t.push(e.value),t},[]),this.dynamicData.reduce(function(t,e){return t.push(e.key),t},[]),this.dynamicData]},t.prototype.diff=function(t,i,a,o,s,l){var h=this;n.diff(t,i,a,this.id,this.chunkHeight,this.touchs,l,function(n,d,c){var f;if(i.length>t.length){h.dynamicData[a]=e({},i[a][h.dynamicIndex[a]],{index:h.dynamicIndex[a]});for(var u=l?a:a+1;u<i.length;u++)h.touchs[u]?(h.touchs[u].reset(i[u],s),h.touchs[u].active(u),l&&!s||(h.dynamicIndex[u]=0),h.dynamicData[u]=e({},i[u][h.dynamicIndex[u]],{index:h.dynamicIndex[u]})):(h.touchs[u]=new r(i[u],u,n[u],d[u],c[u],h.dynamicIndex[u],h,h.touchCallback.bind(h)),l&&!s||(h.dynamicIndex[u]=0),h.touchs[u].setSize(),h.dynamicData[u]=e({},i[u][h.dynamicIndex[u]],{index:h.dynamicIndex[u]})),h.setBoxWidth();n&&(n.length=0,d.length=0,c.length=0)}else if(i.length===t.length)h.resetExistTouch(a,i,l,s);else{var p=[];for(u=i.length;u<t.length;u++)h.touchs[u].deactive(u),p.push(u);h.resetExistTouch(a,i,l,s),h.dynamicIndex.splice(p[0],p.length),h.dynamicData.splice(p[0],p.length),p.length=0,h.setBoxWidth()}if(!o){var m=h.getChangeCallData();h.$options.change&&(f=h.$options).change.apply(f,[a].concat(m))}h.dataTrans=i,h.cachedCall.length=0})},t.prototype.resetExistTouch=function(t,n,i,a){n[t]&&(this.dynamicData[t]=e({},n[t][this.dynamicIndex[t]],{index:this.dynamicIndex[t]}));for(var o=i?t:t+1;o<this.touchs.filter(function(t){return!t.hidden}).length;o++)i&&!a||(this.dynamicIndex[o]=0),this.dynamicData[o]=e({},n[o][this.dynamicIndex[o]],{index:this.dynamicIndex[o]}),this.touchs[o].reset(n[o],a)},t.prototype.genGangedData=function(t,e){var n=0,i=[];return function t(a){i[n]=[];for(var o=0,s=a;o<s.length;o++){var r=s[o];i[n].push({key:r.key,value:r.value})}var l=(e||[])[n]||0;n++,a[l]&&a[l].children.length&&t(a[l].children)}(t),this.completeDynamicIndex(i),i},t.prototype.completeDynamicIndex=function(t){for(var e=this.dynamicIndex.length;e<t.length;e++)this.dynamicIndex[e]=0},t.prototype.callReady=function(){var t;this.$options.ready&&(t=this.$options).ready.apply(t,this.getChangeCallData())},t}();function d(t,e,n,i){t.forEach(function(t,n){try{e[n]}catch(t){i&&i(t)}})}return function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}(".q-select-bk {\n  position: fixed;\n  left: 0;\n  top: 0;\n  height: 100vh;\n  width: 100%;\n  background-color: #000;\n  opacity: 0.3;\n}\n.q-select {\n  position: fixed;\n  width: 100%;\n  height: auto;\n  background-color: #fff;\n  bottom: 0;\n  left: 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.q-select-header {\n  padding: 10px 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  border-bottom: 1px solid #ebebeb;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.q-select-header > .q-select-header-title {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -ms-flex-negative: 1;\n      flex-shrink: 1;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n}\n.q-select-header > .q-select-header-cancel,\n.q-select-header > .q-select-header-confirm {\n  -webkit-box-flex: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100px;\n  font-size: 14px;\n}\n.q-select-header > .q-select-header-confirm {\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n.q-select-header-title__value {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  color: #4a90e2;\n}\n.q-select-box {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.q-select-box-item {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -ms-flex-negative: 1;\n      flex-shrink: 1;\n  position: relative;\n  overflow: hidden;\n}\n.q-select-box-item-collections {\n  width: 100%;\n  will-change: transform;\n}\n.q-select-box-item-collections__tick {\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.q-select-box-item__highlight {\n  width: 100%;\n  position: absolute;\n  left: 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border-top: 1px solid #ebebeb;\n  border-bottom: 1px solid #ebebeb;\n}\n.q-select-box-item__overlay {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  z-index: 5;\n  background-position: top, bottom;\n  background-repeat: no-repeat;\n  background-image:\n    -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.95)), to(rgba(255, 255, 255, 0.6))),\n    -webkit-gradient(linear, left bottom, left top, from(rgba(255, 255, 255, 0.95)), to(rgba(255, 255, 255, 0.6)));\n  background-image:\n    linear-gradient(to bottom, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.6)),\n    linear-gradient(to top, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.6));\n}\n.q-select-loading {\n  width: 100%;\n  position: absolute;\n  display: none;\n  z-index: 6;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.q-select-loading-svg {\n  height: 30px;\n  width: 30px;\n  -webkit-animation: loading-rotate 2s linear infinite;\n          animation: loading-rotate 2s linear infinite;\n}\n.q-select-loading-svg__circle {\n  -webkit-animation: loading-dash 1.5s ease-in-out infinite;\n          animation: loading-dash 1.5s ease-in-out infinite;\n  stroke-dasharray: 90, 150;\n  stroke-dashoffset: 0;\n  stroke-width: 2;\n  stroke-linecap: round;\n  stroke: #4a90e2;\n}\n.animated {\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-duration: 400ms;\n          animation-duration: 400ms;\n}\n\n@-webkit-keyframes loading-dash {\n  0% {\n    stroke-dasharray: 1, 200;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -40;\n  }\n  100% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -120;\n  }\n}\n\n@keyframes loading-dash {\n  0% {\n    stroke-dasharray: 1, 200;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -40;\n  }\n  100% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -120;\n  }\n}\n\n@-webkit-keyframes loading-rotate {\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes loading-rotate {\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0.3;\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0.3;\n  }\n}\n.fadeIn {\n  -webkit-animation-name: fadeIn;\n          animation-name: fadeIn;\n}\n\n@-webkit-keyframes fadeOut {\n  from {\n    opacity: 0.3;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 0.3;\n  }\n  to {\n    opacity: 0;\n  }\n}\n.fadeOut {\n  -webkit-animation-name: fadeOut;\n          animation-name: fadeOut;\n}\n\n@-webkit-keyframes slideInUp {\n  from {\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n    visibility: visible;\n  }\n  to {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@keyframes slideInUp {\n  from {\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n    visibility: visible;\n  }\n  to {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n.slideInUp {\n  -webkit-animation-name: slideInUp;\n          animation-name: slideInUp;\n}\n\n@-webkit-keyframes slideOutDown {\n  from {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n  }\n}\n\n@keyframes slideOutDown {\n  from {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n  }\n}\n.slideOutDown {\n  -webkit-animation-name: slideOutDown;\n  animation-name: slideOutDown;\n}\n"),function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}(a,e),a.prototype.setColumnData=function(t,e){var n=this;return new Promise(function(i,a){try{d([t,e],["column","data"],0,a);var s=n.dataTrans.slice(),r=[];if(Array.isArray(t))for(var l=0,h=0,c=t;h<c.length;h++){r[+c[h]]=e[l],l++}else r=e;var f=Array.isArray(t)?t[t.length-1]+1:t+1,u=Array.isArray(t)?t[0]:t;n.normalizeData(r,t),n.dataTrans=n.dataTrans.slice(0,f).filter(function(t){return t.length}),n.dynamicIndex=n.dynamicIndex.slice(0,f),n.diff(s,n.dataTrans,u,!0,!0,!0),n.realData=o(n.dynamicData),i(n.getChangeCallData())}catch(t){a(t)}})},a.prototype.scrollTo=function(t,e){d([t,e],["column","index"]);var n=this.dynamicIndex.slice();return n[t]=e,this.setIndex(n)},a.prototype.setIndex=function(t){var e=this;return new Promise(function(n,i){try{d([t],["index"],0,i),e.validateIndex(t)?(e._setIndex(t),n(e.getChangeCallData())):i()}catch(t){i(t)}})},a.prototype._setIndex=function(t,e,n){var i,a,s=this,r=this.realIndex.slice();if(this.dynamicIndex=t.slice(),this.realIndex=t.slice(),a=t,(i=r).length!==a.length||!i.every(function(t,e){return t===a[e]})||n)if(this.isGanged){var l=this.genGangedData(this.data,t);this.dynamicIndex.map(function(t,e){t<0&&(s.dynamicIndex[e]=0,s.realIndex[e]=0);var n=(l[e]||l[l.length-1]).length;return t>n-1&&(s.dynamicIndex[e]=n-1,s.realIndex[e]=n-1),t}),this.diff(e||this.dataTrans,l,0,!0,!1,!0),this.realIndex=this.dynamicIndex.slice(),this.realData=o(this.dynamicData),this.callReady()}else n&&this.diff(e,this.dataTrans,0,!0,!0,!0),this.dynamicIndex=t.slice(),this.realIndex=t.slice(),this.setIndexAndData(this.dataTrans),this.touchs.filter(function(t){return!t.hidden}).forEach(function(t,e){return t.scrollTo(s.realIndex[e])}),this.callReady()},a.prototype.setValue=function(t){return this._setKeyAndValue("value",t)},a.prototype.setKey=function(t){return this._setKeyAndValue("key",t)},a.prototype._setKeyAndValue=function(t,e){var n=this;return new Promise(function(i,a){var o=[],s=0;try{if(n.isGanged){!function n(i){i.forEach(function(i,a){i[t]===e[s]&&(s++,o.push(a),n(i.children))})}(n.data);for(var r=n.genGangedData(n.data,o),l=o.length;l<r.length;l++)o[l]=0}else n.dataTrans.forEach(function(n,i){var a=n.findIndex(function(n){return n[t]===e[i]});o.push(-1===a?0:a)});n._setIndex(o),i(n.getChangeCallData())}catch(t){a(t)}})},a.prototype.setData=function(t,e){var n=this;return new Promise(function(a,s){if(n.isGanged=t.every(function(t){return i(t)}),!n.validateData(t)||e&&!n.validateIndex(e))s();else{var r=o(n.dataTrans);n.data=t,n.normalizeData(),n._setIndex(e||Array.from({length:n.dataTrans.length}).fill(0),r,!0),a(n.getChangeCallData())}})},a.prototype.getData=function(){return this.getChangeCallData()},a.prototype.getIndex=function(){return this.realIndex},a.prototype.getValue=function(){return this.dynamicData.reduce(function(t,e){return t.push(e.value),t},[])},a.prototype.getKey=function(){return this.dynamicData.reduce(function(t,e){return t.push(e.key),t},[])},a.prototype.close=function(){return this.closeSelect()},a.prototype.show=function(){return this.showSelect()},a.prototype.destroy=function(){return this.destroySelect()},a.prototype.setLoading=function(){this.loading=!0;var t=n.find("q-select-loading--"+this.id);n.addStyle(t,[{display:"flex"}]),this.touchs.filter(function(t){return!t.hidden}).forEach(function(t){t.shrinkSize()})},a.prototype.cancelLoading=function(){this.loading=!1;var t=n.find("q-select-loading--"+this.id);n.addStyle(t,{display:"none"}),this.touchs.filter(function(t){return!t.hidden}).forEach(function(t){t.setSize()})},a}(h)},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).QSelect=e();