var t,i;t=this,i=function(){"use strict";var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)},i=function(){return(i=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},e=function(){function t(){this.initialDomString=""}return t.prototype.init=function(t,i,e,n){var a=this,s=i.id,o=i.loading,r=Math.floor(i.count/2)*i.chunkHeight;e||(this.initialDomString+='\n        <div class="q-select-header q-select-header--'+s+'" style="height:45px;padding-left:20px;padding-right:20px;">\n          <div class="q-select-header-cancel q-select-header-cancel--'+s+'" style="width:100px; font-size:14px;">\n            <div class="q-select-header-cancel__value q-select-header-cancel__value--'+s+'">'+(i.cancelBtn||"\u53d6\u6d88")+'</div>\n          </div>\n          <div class="q-select-header-title q-select-header-title--'+s+'">\n            <div class="q-select-header-title__value q-select-header-title__value--'+s+'">'+(i.title||"\u8bf7\u9009\u62e9")+'</div>\n          </div>\n          <div class="q-select-header-confirm q-select-header-confirm--'+s+'" style="width:100px; font-size:14px;">\n            <div class="q-select-header-confirm__value q-select-header-confirm__value--'+s+'">'+(i.confirmBtn||"\u786e\u5b9a")+"</div>\n          </div>\n        </div>\n      "),this.initialDomString+='\n      <div style="height:'+i.count*i.chunkHeight+"px;display:"+(o?"flex":"none")+'" class="q-select-loading q-select-loading--'+s+'">\n        <svg class="q-select-loading-svg" viewBox="25 25 50 50" style="height:30px; width:30px;">\n          <circle\n            class="q-select-loading-svg__circle"\n            cx="50"\n            cy="50"\n            r="20"\n            fill="none"\n          />\n        </svg>\n      </div>\n      <div style="height:'+i.count*i.chunkHeight+'px" class="q-select-box q-select-box--'+s+'">\n    ',t.forEach(function(t){a.initialDomString+='\n      <div class="q-select-box-item q-select-box-item--'+s+' q-select-flex">\n        <div class="q-select-box-item__overlay q-select-box-item__overlay--'+s+'" style="background-size: 100% '+(o?"100%":r+"px")+';"></div>\n        <div class="q-select-box-item__highlight q-select-box-item__highlight--'+s+'" style="top: '+r+"px;height: "+i.chunkHeight+'px"></div>\n        <div class="q-select-box-item-collections q-select-box-item-collections--'+s+'">\n        '+t.map(function(t){return'<div style="line-height: '+i.chunkHeight+'px;" class="q-select-box-item-collections__tick q-select-box-item-collections__tick--'+s+'">\n              '+t.value+"\n            </div>"}).join("")+"\n        </div>\n      </div>\n      "}),n(this.initialDomString)},t.prototype.remove=function(){this.initialDomString=""},t.diff=function(i,e,n,a,s,o,r,h){var c=t.findAll("q-select-box-item-collections--"+a),l=t.find("q-select-box--"+a);if(i.length<e.length)if(c.length<e.length){for(var d=[],u=[],f=[],p=r?n:n+1;p<i.length;p++){var y=c[p];t.diffForDatas(y,a,s,o[p].data,e[p])}for(var m=c.length;m<e.length;m++){var g=document.createDocumentFragment(),v=t.create("div");t.addClass(v,["q-select-box-item","q-select-flex","q-select-box-item--"+a]);var x=t.create("div");t.addClass(x,["q-select-box-item__overlay","q-select-box-item__overlay--"+a]);var I=t.create("div");t.addClass(I,["q-select-box-item__highlight","q-select-box-item__highlight--"+a]),t.addStyle(I,{height:s+"px"}),v.appendChild(x),v.appendChild(I);var D=t.create("div");t.addClass(D,["q-select-box-item-collections","q-select-box-item-collections--"+a]);for(p=0;p<e[m].length;p++){var T=t.create("div");t.addClass(T,["q-select-box-item-collections__tick","q-select-box-item-collections__tick--"+a]),t.addStyle(T,{lineHeight:s+"px"}),T.textContent=e[m][p].value,g.appendChild(T)}D.appendChild(g),v.appendChild(D),l.appendChild(v),d[m]=x,u[m]=D,f[m]=I}h&&h(d,u,f)}else{for(p=r?n:n+1;p<e.length;p++){y=t.findIndex("q-select-box-item-collections--"+a,p);t.diffForDatas(y,a,s,o[p].data,e[p])}h&&h()}else if(i.length===e.length){for(p=r?n:n+1;p<e.length;p++)t.diffForDatas(c[p],a,s,i[p],e[p]);h&&h()}else if(i.length>e.length){for(p=r?n:n+1;p<e.length;p++)t.diffForDatas(c[p],a,s,i[p],e[p]);h&&h()}},t.diffForDatas=function(i,e,n,a,s){var o=s.length-a.length,r=a.length,h=s.length;if(o>0){for(var c=document.createDocumentFragment(),l=0;l<r;l++){var d=s[l].value;i.children[l].textContent=d}for(l=r;l<h;l++){var u=document.createElement("div");d=s[l].value;t.addClass(u,["q-select-box-item-collections__tick","q-select-box-item-collections__tick--"+e]),t.addStyle(u,{lineHeight:n+"px"}),u.textContent=d,c.appendChild(u)}i.appendChild(c)}else{for(l=0;l<h;l++){d=s[l].value;i.children[l].textContent=d}var f=Array.from(i.children).slice();for(l=h;l<r;l++)i.removeChild(f[l])}},t.create=function(t){return document.createElement(t)},t.find=function(t){return document.querySelector("."+t)},t.findIndex=function(t,i){return Array.from(document.querySelectorAll("."+t))[i]},t.findLast=function(t){var i=Array.from(document.querySelectorAll("."+t));return i[i.length-1]},t.addClass=function(t,i){if(Array.isArray(i))i=i.filter(function(i){return!t.classList.contains(i)});else if(t.classList.contains(i))return;var e=Array.isArray(i)?i.join(" "):i;t.className+=" "+e},t.removeClass=function(t,i){var e;Array.isArray(i)?(e=t.classList).remove.apply(e,i):t.classList.remove(i)},t.addStyle=function(t,i){var e=this;if(Array.isArray(i))i.map(function(i){return e.addStyle(t,i)});else for(var n in i)t.style[n]=i[n]},t.remove=function(t,i){t.removeChild(i)},t.findAll=function(t){return document.querySelectorAll("."+t)},t.bind=function(t,i,e,n){t.addEventListener(i,e,n)},t.unbind=function(t,i){t.removeEventListener(i,function(){})},t}();function n(t){return"Object"===Object.prototype.toString.call(t).slice(8,-1)}function a(t){return isFinite(t)}function s(t){if(Array.isArray(t))return t.map(function(t){return s(t)});if(n(t)){var i={};for(var e in t){var a=t[e];i[e]=n(a)?s(a):a}return i}return t}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame;var o=function(){function t(t){void 0===t&&(t=200),this.start=0,this.end=0,this.diff=0,this.dir="bottom",this.count=0,this.ratio=0,this.result=0,this.animateId=0,this.duration=t,this.pipline=!0}return t.prototype.getAnimateCount=function(t){return t/16},t.prototype.getDirection=function(){return this.start>this.end?"top":"bottom"},t.prototype.run=function(t,i,e,n,a){t!==i&&0!==a?(this.pipline=!0,this.ratio=0,this.start=t,this.end=i,this.result=t,this.diff=Math.abs(this.start-this.end),this.count=Math.ceil(this.getAnimateCount(a||this.duration)),this.dir=this.getDirection(),this.doAnimate(e,n)):n&&n(i)},t.prototype.stop=function(){this.pipline=!1,this.ratio=0,window.cancelAnimationFrame(this.animateId)},t.prototype.doAnimate=function(t,i){var e;this.pipline&&(this.ratio+=1/this.count,this.ratio<=1?(this.result=this.start+this.diff*(e=this.ratio,Math.pow(e-1,3)+1)*("bottom"===this.dir?1:-1),this.animateId=window.requestAnimationFrame(this.doAnimate.bind(this,t,i))):(this.result=this.end,window.cancelAnimationFrame(this.animateId),i&&i(this.end),this.ratio=0),t&&t(this.result))},t}(),r=function(){function t(t,i,e,n,a,s,r,h,c){this.overlay=e,this.collection=n,this.hightlightEl=a,this.pre=r,this.endCall=h,this.curIndex=s,this.preIndex=s,this.preTrans=0,this.animateSlide=new o(2e3),this.animateShrink=new o(250),this.data=t,this.average=Math.floor(r.count/2),this.maxScrollTop=0,this.minScrollTop=0,this.featureScrollTop=0,this.isAnimating=!1,this.aim=i,this.hidden=!1,this.lastTime=0,this.positions=[],this.touchStart=0,this.touchDiff=0,this.fromDiff=c||!1,this.init()}return t.prototype.init=function(){e.bind(this.overlay,"touchstart",this.doTouchStart.bind(this)),e.bind(this.overlay,"touchmove",this.doTouchMove.bind(this)),e.bind(this.overlay,"touchend",this.doTouchEnd.bind(this)),this.initTrans()},t.prototype.active=function(t){e.removeClass(e.findIndex("q-select-box-item--"+this.pre.id,t),"q-select-none"),e.addClass(e.findIndex("q-select-box-item--"+this.pre.id,t),"q-select-flex"),this.hidden=!1},t.prototype.deactive=function(t){e.removeClass(e.findIndex("q-select-box-item--"+this.pre.id,t),"q-select-flex"),e.addClass(e.findIndex("q-select-box-item--"+this.pre.id,t),"q-select-none"),this.hidden=!0},t.prototype.reset=function(t,i){this.data=t,this.preIndex=this.curIndex,this.setMinScrollTop(this.data),i?(this.preIndex=0,this.curIndex=0,this.scrollTo(0)):this.scrollTo(this.pre.dynamicIndex[this.aim])},t.prototype.initTrans=function(){var t=(this.average-this.curIndex)*this.pre.chunkHeight;this.preTrans=t,this.initScrollTop(this.average*this.pre.chunkHeight),this.setTrans(t),this.fromDiff&&this.setSize()},t.prototype.setSize=function(){var t=Math.floor(this.pre.$options.count/2)*this.pre.$options.chunkHeight;e.addStyle(this.overlay,{backgroundSize:"100% "+t+"px"}),this.hightlightEl&&e.addStyle(this.hightlightEl,{top:t+"px"})},t.prototype.shrinkSize=function(){e.addStyle(this.overlay,{backgroundSize:"100% 100%"})},t.prototype.initScrollTop=function(t){this.maxScrollTop=t,this.setMinScrollTop(this.data)},t.prototype.setMinScrollTop=function(t){this.minScrollTop=this.maxScrollTop-(t.length-1)*this.pre.chunkHeight},t.prototype.setTrans=function(t){this.collection.style.transform="translate3d(0,"+t+"px,0)"},t.prototype.getTouchCenter=function(t){return t.length>=2?(t[0].pageY+t[1].pageY)/2:t[0].pageY},t.prototype.doTouchStart=function(t){this.data.length&&(this.touchStart=this.getTouchCenter(t.touches),this.animateSlide.stop(),this.animateShrink.stop())},t.prototype.doTouchMove=function(t){if(t.preventDefault(),this.data.length){var i=t.timeStamp;this.touchDiff=this.getTouchCenter(t.touches)-this.touchStart+this.preTrans,this.touchDiff>this.maxScrollTop+.4*this.pre.$options.chunkHeight&&(this.touchDiff=this.maxScrollTop+.4*this.pre.$options.chunkHeight),this.touchDiff<this.minScrollTop-.4*this.pre.$options.chunkHeight&&(this.touchDiff=this.minScrollTop-.4*this.pre.$options.chunkHeight),this.positions.length>60&&this.positions.splice(0,30),this.positions.push({top:this.touchDiff,time:i}),this.lastTime=i,this.setTrans(this.touchDiff)}},t.prototype.doTouchEnd=function(t){if(this.data.length){var i=t.timeStamp;this.isAnimating=!0,i-this.lastTime<=100?this.doSlideAnimate(i):this.doShrinkAnimate()}},t.prototype.doSlideAnimate=function(t){var i,e=this.positions.length-1,n=this.positions.filter(function(i){return i.time>=t-100})[0],a=this.positions[e].time-n.time,s=this.touchDiff-n.top;i=s/a*(1e3/60);var o,r=this.touchDiff,h=0,c=!1;for(this.positions.length=0;Math.abs(i)>=.1;){if(h+=16,(r+=i*=.95)>=this.maxScrollTop){c=!0,r=this.maxScrollTop,o=this.maxScrollTop+.4*this.pre.$options.chunkHeight;break}if(r<=this.minScrollTop){c=!0,r=this.minScrollTop,o=this.minScrollTop-.4*this.pre.$options.chunkHeight;break}}this.preIndex=this.curIndex;var l=this.getFeatureIndex(r),d=c?r:this.getFeatureScrollTop(l);Math.abs(s)<=10||h<=250?this.shrinkAnimateToEnd(d,void 0,o):this.slideAnimateToEnd(d,h,o)},t.prototype.doShrinkAnimate=function(){this.shrinkAnimateToEnd(this.touchDiff)},t.prototype.scrollTo=function(t){var i=this.getFeatureScrollTop(t||0);this.shrinkAnimateToEnd(i,!0)},t.prototype.slideAnimateToEnd=function(t,i,e){var n=this;this.animateSlide.run(this.touchDiff,e||t,function(t){n.touchDiff=t,n.preTrans=t,n.setTrans(t)},function(i){e?n.shrinkAnimateToEnd(t):n.animateFinishedCall(i)},i)},t.prototype.shrinkAnimateToEnd=function(t,i,e){var n=this,a=this.getFeatureIndex(t);t=this.getFeatureScrollTop(a),this.animateShrink.run(this.touchDiff,e||t,function(t){n.setTrans(t),n.preTrans=t,n.touchDiff=t},function(a){e?n.shrinkAnimateToEnd(t):n.animateFinishedCall(a,i)},i?0:250)},t.prototype.animateFinishedCall=function(t,i){if(this.isAnimating=!1,this.preTrans=t,this.touchDiff=t,this.setTrans(t),this.curIndex=this.getFeatureIndex(t),this.preIndex!==this.curIndex&&!i){var e=this.data[this.curIndex];this.fromDiff||this.endCall({key:e.key,value:e.value,index:this.curIndex},this.aim),this.preIndex=this.curIndex}},t.prototype.getFeatureIndex=function(t){var i=this.average-Math.round(t/this.pre.chunkHeight),e=this.data.length;return i<0?0:i>e-1?e-1:i},t.prototype.getFeatureScrollTop=function(t){return(this.average-t)*this.pre.chunkHeight},t.prototype.destroy=function(){e.unbind(this.overlay,"touchstart"),e.unbind(this.overlay,"touchmove"),e.unbind(this.overlay,"touchend")},t}(),h=0;function c(t,i,e,n){var a=!1;return t.forEach(function(t,e){i[e]}),a}return function(i){function a(){return null!==i&&i.apply(this,arguments)||this}return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(a,i),a.prototype.setColumnData=function(t,i){var e=this;return new Promise(function(n,a){try{if(c([t,i],["column","data"]))return;if(e.touchs.filter(function(t){return!t.hidden}).some(function(t){return t.isAnimating}))return void a("[SelectQ]: Please wait for animating stops");var o=e.dataTrans.slice(),r=[];if(Array.isArray(t))for(var h=0,l=0,d=t;l<d.length;l++){r[+d[l]]=i[h],h++}else r=i;var u=Array.isArray(t)?t[t.length-1]+1:t+1,f=Array.isArray(t)?t[0]:t,p=Array.isArray(t)?r:[r];e.validateData(p,!1)?(e.normalizeData(r,t),e.dataTrans=e.dataTrans.slice(0,u).filter(function(t){return t.length}),e.normalizeIndex(e.dataTrans,e.dynamicIndex),e.realIndex=e.dynamicIndex.slice(),e.diff(o,e.dataTrans,f,!0,!0,!0),e.realData=s(e.dynamicData),n(e.getChangeCallData())):a()}catch(t){a(t)}})},a.prototype.scrollTo=function(t,i){if(!c([t,i],["column","index"])){var e=this.dynamicIndex.slice();return e[t]=i,this.setIndex(e)}},a.prototype.setIndex=function(t){var i=this;return new Promise(function(e,n){try{c([t],["index"]),i.validateIndex(t)?(i._setIndex(t,n),e(i.getChangeCallData())):n()}catch(t){n(t)}})},a.prototype._setIndex=function(t,i,e,n){var a=this;if(this.touchs.filter(function(t){return!t.hidden}).some(function(t){return t.isAnimating}))i("[SelectQ]: Please wait for animating stops");else{var o,r,h=this.dynamicIndex.slice();if(this.dynamicIndex=t.slice(),this.realIndex=t.slice(),r=t,(o=h).length!==r.length||!o.every(function(t,i){return t===r[i]})||n){if(this.isGanged){var c=this.genGangedData(this.data,this.dynamicIndex);this.diff(e||this.dataTrans,c,0,!0,!1,!0),this.realIndex=this.dynamicIndex.slice(),this.realData=s(this.dynamicData),this.callReady()}else this.normalizeIndex(this.dataTrans,t),n&&this.diff(e,this.dataTrans,0,!0,!(t&&t.length),!0),this.setIndexAndData(this.dataTrans),this.touchs.filter(function(t){return!t.hidden}).forEach(function(t,i){return t.scrollTo(a.realIndex[i]||0)}),this.callReady();this.touchs.filter(function(t){return!t.hidden}).forEach(function(t,i){t.curIndex=t.preIndex=a.realIndex[i]||0})}}},a.prototype.setValue=function(t){return this._setKeyAndValue("value",t)},a.prototype.setKey=function(t){return this._setKeyAndValue("key",t)},a.prototype._setKeyAndValue=function(t,i){var e=this;return new Promise(function(n,a){var s;c([i],[t],((s=t).slice(0,1).toUpperCase(),s.slice(1)));var o=[],r=0;try{if(e.isGanged){!function e(n){n.forEach(function(n,a){n[t]===i[r]&&(r++,o.push(a),e(n.children))})}(e.data);for(var h=e.genGangedData(e.data,o),l=o.length;l<h.length;l++)o[l]=0}else e.dataTrans.forEach(function(e,n){var a=e.findIndex(function(e){return e[t]===i[n]});o.push(-1===a?0:a)});e._setIndex(o,a),n(e.getChangeCallData())}catch(t){a(t)}})},a.prototype.setData=function(t,i){var e=this;return new Promise(function(a,o){if(e.isGanged=t.every(function(t){return n(t)}),!e.validateData(t)||i&&!e.validateIndex(i))o("wrong data or index");else{var r=s(e.dataTrans);e.data=s(t),e.normalizeData(),e._setIndex(i||Array.from({length:e.dataTrans.length}).fill(0),o,r,!0),a(e.getChangeCallData())}})},a.prototype.getData=function(){return this.getChangeCallData()},a.prototype.getIndex=function(){return this.realIndex},a.prototype.getValue=function(){return this.dynamicData.reduce(function(t,i){return t.push(i.value),t},[])},a.prototype.getKey=function(){return this.dynamicData.reduce(function(t,i){return t.push(i.key),t},[])},a.prototype.close=function(){return this.closeSelect()},a.prototype.show=function(){return this.showSelect()},a.prototype.destroy=function(){return this.destroySelect()},a.prototype.setLoading=function(){this.loading=!0;var t=e.find("q-select-loading--"+this.id);e.addStyle(t,[{display:"flex"}]),this.touchs.filter(function(t){return!t.hidden}).forEach(function(t){t.shrinkSize()})},a.prototype.cancelLoading=function(){this.loading=!1;var t=e.find("q-select-loading--"+this.id);e.addStyle(t,{display:"none"}),this.touchs.filter(function(t){return!t.hidden}).forEach(function(t){t.setSize()})},a.prototype.setTitle=function(t){c([t],["title"])||(e.find("q-select-header-title__value--"+this.id).innerHTML=t)},a}(function(){function t(t){if(this.$options=t||{},t=t||{},this.id=h++,this.target=null,t.target){var i=document.querySelector(t.target);i?this.target=i:t.target}this.$options.id=this.id,this.count=t.count=a(+t.count)?+t.count:7,this.chunkHeight=t.chunkHeight=a(+t.chunkHeight)?+t.chunkHeight:40,this.data=s(t.data),this.dataTrans=[],this.index=t.index,this.dynamicIndex=[],this.realIndex=[],this.touchs=[],this.dynamicData=[],this.realData=[],this.cachedCall=[],this.isReady=!1,this.isGanged=!1,this.hidden=!0,this.loading=!!t.loading,this.dom=new e,this.validateOptions()&&this.init()}return t.prototype.validateOptions=function(){var t=this;return this.count%2!=1&&(this.count<5||this.count>9)&&(this.count,this.count=this.$options.count=7),(this.chunkHeight<30||this.chunkHeight>60)&&(this.chunkHeight,this.chunkHeight=this.$options.chunkHeight=40),["ready","cancel","confirm","show","close"].map(function(i){return function(t){this.$options[t]&&"function"!=typeof this.$options[t]&&(this.$options[t],this.$options[t]=function(){})}.call(t,i)}),!(!this.validateData()||!this.validateIndex())},t.prototype.validateData=function(t,i){var e=t||this.$options.data;return(!e||!Array.isArray(e)||Array.isArray(e)&&0===e.length)&&(this.data=e=[[""]]),this.isGanged=void 0!==i?i:e.every(function(t){return n(t)}),this.isGanged?function t(i,e){return i.every(function(i){if(n(i)){var a=!0,s=!0;return e?(i.value,a=!0):(i.value,s=!0),!s&&!a||!i.children||!i.children.length||t(i.children,!1)}return!0})}(e,!0):e.every(function(t){return!!Array.isArray(t)&&t.every(function(t){return!n(t)||(!(!t.children||!t.children.length)||(t.value,!0))})})},t.prototype.validateIndex=function(t){var i=t||this.$options.index;return!i||(!Array.isArray(i)||i.every(function(t){return!0}))},t.prototype.init=function(){var t=this;this.normalizeData(),this.dom.init(this.dataTrans,this.$options,!!this.target,function(i){if(!e.find("q-select-bk")&&!t.target){var n=e.create("div");e.addClass(n,"q-select-bk"),e.addStyle(n,[{zIndex:a(+t.$options.bkIndex)?+t.$options.bkIndex:500},{display:"none"}]),document.body.appendChild(n)}var s=e.create("div");e.addClass(s,["q-select","q-select--"+t.id]),t.target?e.addStyle(s,[{position:"static"}]):e.addStyle(s,[{zIndex:a(+t.$options.selectIndex)?+t.$options.selectIndex:600},{display:"none"}]),s.innerHTML=i,t.target?(t.target.appendChild(s),t.hidden=!1):document.body.appendChild(s),t.dom.remove(),t.prepareMount()})},t.prototype.normalizeIndex=function(t,i){var e=this;this.index=i||this.index,this.index=this.index||Array.from({length:t.length}).fill(0),this.index.map(function(i,n){if(i<0&&(e.index[n]=0),t[n]){var a=t[n].length;i>a-1&&(e.index[n]=a-1)}return i});var n=this.index.length-t.length;this.index=n>=0?this.index.slice(0,t.length):this.index.concat(Array.from({length:Math.abs(n)}).fill(0)),this.dynamicIndex=this.index.slice(),this.realIndex=this.index.slice()},t.prototype.normalizeData=function(t,i){if(this.isGanged)this.normalizeGangedData(),this.dataTrans=this.genGangedData(this.data);else{if(t)if(Array.isArray(t)&&Array.isArray(i))for(var e=0;e<t.length-1;e++)this.data[i[e]]=t[i[e]];else this.data[i]=t;this.normalizeNotGangedData(),this.dataTrans=s(this.data)}},t.prototype.normalizeGangedData=function(){!function t(i){i.map(function(e,a){return n(e)?e.key=e.key||e.value:i[a]=e={value:e,key:e,children:[]},e.children&&e.children.length?t(e.children):e.children=[],e})}(this.data)},t.prototype.normalizeNotGangedData=function(){this.data.map(function(t){for(var i in t){var e=t[i];n(e)?e.key=e.key||e.value:t[i]={key:e,value:e}}return t})},t.prototype.prepareMount=function(){var t=this;this.normalizeIndex(this.dataTrans);var i=e.findAll("q-select-box-item__overlay--"+this.id),n=e.findAll("q-select-box-item-collections--"+this.id),a=e.findAll("q-select-box-item__highlight--"+this.id);this.dynamicData=this.dataTrans.reduce(function(i,e,n){return i[n]=e[t.index[n]]||{},i[n].index=n,i},[]),this.realData=s(this.dynamicData),this.target||this.mountActions(),this.mountTouches(i,n,a)},t.prototype.mountActions=function(){var t=this,i=e.find("q-select-header-confirm--"+this.id),n=e.find("q-select-header-cancel--"+this.id);function a(){if(this.dynamicIndex=this.realIndex.slice(),this.isGanged){var t=s(this.dataTrans),i=this.genGangedData(this.data,this.realIndex);this.diff(t,i,0,!0,!1,!0)}this.stopAll()}e.bind(i,"click",function(){var i;t.touchs.filter(function(t){return!t.hidden}).every(function(t){return!t.isAnimating})?(t.realIndex=t.dynamicIndex.slice(),t.realData=s(t.dynamicData)):(t.dynamicData=s(t.realData),a.call(t)),t.closeSelect(),t.$options.confirm&&(i=t.$options).confirm.apply(i,t.getChangeCallData())}),e.bind(n,"click",function(){t.$options.disableDefaultCancel||t.closeSelect(),a.call(t),t.$options.cancel&&t.$options.cancel()})},t.prototype.mountTouches=function(t,i,e){var n,a=this;this.dataTrans.forEach(function(n,s){a.touchs[s]=new r(n,s,t[s],i[s],e[s],a.dynamicIndex[s],a,a.touchCallback.bind(a))}),this.setBoxWidth(),this.isReady=!0,this.$options.ready&&(n=this.$options).ready.apply(n,this.getChangeCallData())},t.prototype.closeSelect=function(){var t=this;if(!this.hidden){var i=e.find("q-select--"+this.id),n=e.find("q-select-bk");e.addStyle(n,{display:"none"}),this.slideAnimation("out",i,function(){var n;e.addStyle(i,{display:"none"}),t.hidden=!0,t.$options.hide&&(n=t.$options).hide.apply(n,t.getChangeCallData())})}},t.prototype.destroySelect=function(){for(var t in this.touchs.forEach(function(t){return t.destroy()}),e.remove(document.body,e.find("q-select-bk")),e.remove(document.body,e.find("q-select--"+this.id)),this.__proto__=null,this)this[t]=null},t.prototype.showSelect=function(){var t=this;if(this.hidden){var i=e.find("q-select--"+this.id),n=e.find("q-select-bk");e.addStyle(i,{display:"block"}),e.addStyle(n,{display:"block"}),this.slideAnimation("in",i,function(){var i;t.hidden=!1,t.$options.show&&(i=t.$options).show.apply(i,t.getChangeCallData())})}},t.prototype.slideAnimation=function(t,i,n){e.addClass(i,["animated","in"===t?"slideInUp":"slideOutDown"]);var a=setTimeout(function(){e.removeClass(i,["animated","in"===t?"slideInUp":"slideOutDown"]),n&&n(),clearTimeout(a)},200)},t.prototype.stopAll=function(){var t=this;this.touchs.filter(function(t){return!t.hidden}).forEach(function(i,e){i.animateShrink.stop(),i.animateSlide.stop(),i.scrollTo(t.realIndex[e]),i.setMinScrollTop(t.dataTrans[e])})},t.prototype.setIndexAndData=function(t){var e=this;t.forEach(function(n,a){var s=e.dynamicIndex[a];s>n.length-1&&(e.realIndex[a]=e.dynamicIndex[a]=s=n.length-1),s<0&&(e.realIndex[a]=e.dynamicIndex[a]=s=0),e.dynamicData[a]=i({},t[a][s],{index:s}),e.realData[a]=i({},t[a][s],{index:s})})},t.prototype.setBoxWidth=function(){var t=e.findAll("q-select-box-item--"+this.id),i=100/this.touchs.filter(function(t){return!t.hidden}).length+"%";t.forEach(function(t){t.style.width=i})},t.prototype.touchCallback=function(t,i){this.dynamicIndex[i]=t.index,this.target&&(this.realIndex[i]=t.index),this.isGanged?this.gangedCallback(t,i):this.notGangedCallback(t,i)},t.prototype.notGangedCallback=function(t,i){var e;this.dynamicData[i]=t;var n=function(){};if(n.priority=i,this.cachedCall.push(n),this.touchs.every(function(t){return!t.isAnimating})&&!this.hidden){var a=Math.min.apply(Math,this.cachedCall.reduce(function(t,i){return t.push(+i.priority),t},[])),s=this.getChangeCallData();this.$options.change&&(e=this.$options).change.apply(e,[a].concat(s)),this.cachedCall.length=0}},t.prototype.gangedCallback=function(t,i){var e=function(){};e.priority=i,e.value=t;var n=this.touchs.filter(function(t){return!t.hidden});if(this.cachedCall[i]=e,n.every(function(t){return!t.isAnimating})){var a=Math.min.apply(Math,this.cachedCall.reduce(function(t,i){return t.push(+i.priority),t},[]));this.dynamicIndex=this.dynamicIndex.slice(0,a+1);for(var s=a+1;s<n.length;s++)this.dynamicIndex[s]=0;var o=this.genGangedData(this.data,this.dynamicIndex);this.diff(this.dataTrans,o,a,!1,!0)}},t.prototype.getChangeCallData=function(){return[this.dynamicData.reduce(function(t,i){return t.push(i.value),t},[]),this.dynamicData.reduce(function(t,i){return t.push(i.key),t},[]),this.dynamicData]},t.prototype.diff=function(t,n,a,s,o,h){var c=this;e.diff(t,n,a,this.id,this.chunkHeight,this.touchs,h,function(e,l,d){var u;if(n.length>t.length){c.dynamicData[a]=i({},n[a][c.dynamicIndex[a]],{index:c.dynamicIndex[a]});for(var f=h?a:a+1;f<n.length;f++)c.touchs[f]?(c.touchs[f].reset(n[f],o),c.touchs[f].active(f),h&&!o||(c.dynamicIndex[f]=0),c.dynamicData[f]=i({},n[f][c.dynamicIndex[f]],{index:c.dynamicIndex[f]})):(c.touchs[f]=new r(n[f],f,e[f],l[f],d[f],c.dynamicIndex[f],c,c.touchCallback.bind(c)),h&&!o||(c.dynamicIndex[f]=0),c.touchs[f].setSize(),c.dynamicData[f]=i({},n[f][c.dynamicIndex[f]],{index:c.dynamicIndex[f]})),c.setBoxWidth();e&&(e.length=0,l.length=0,d.length=0)}else if(n.length===t.length)c.resetExistTouch(a,n,h,o);else{var p=[];for(f=n.length;f<t.length;f++)c.touchs[f].deactive(f),p.push(f);c.resetExistTouch(a,n,h,o),c.dynamicIndex.splice(p[0],p.length),c.dynamicData.splice(p[0],p.length),p.length=0,c.setBoxWidth()}if(!s){var y=c.getChangeCallData();c.$options.change&&(u=c.$options).change.apply(u,[a].concat(y))}c.dataTrans=n,c.cachedCall.length=0})},t.prototype.resetExistTouch=function(t,e,n,a){e[t]&&(this.dynamicData[t]=i({},e[t][this.dynamicIndex[t]],{index:this.dynamicIndex[t]}));for(var s=n?t:t+1;s<this.touchs.filter(function(t){return!t.hidden}).length;s++)n&&!a||(this.dynamicIndex[s]=0),this.dynamicData[s]=i({},e[s][this.dynamicIndex[s]],{index:this.dynamicIndex[s]}),this.touchs[s].reset(e[s],a)},t.prototype.genGangedData=function(t,i){var e=0,n=[];return function t(a){n[e]=[];for(var s=0,o=a;s<o.length;s++){var r=o[s];n[e].push({key:r.key,value:r.value})}var h=(i||[])[e]||0;e++,a[h]?a[h].children.length&&t.call(this,a[h].children):a[0]&&a[0].children.length&&t.call(this,a[0].children)}.call(this,t),this.completeDynamicIndex(n),n},t.prototype.completeDynamicIndex=function(t){for(var i=0;i<this.dynamicIndex.length;i++)t[i]&&this.dynamicIndex[i]>t[i].length-1&&(this.dynamicIndex[i]=t[i].length-1),this.dynamicIndex[i]<0&&(this.dynamicIndex[i]=0);for(i=this.dynamicIndex.length;i<t.length;i++)this.dynamicIndex[i]=0;this.dynamicIndex=this.dynamicIndex.slice(0,t.length)},t.prototype.callReady=function(){var t;this.$options.ready&&(t=this.$options).ready.apply(t,this.getChangeCallData())},t}())},"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).QSelect=i();